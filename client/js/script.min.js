$(document).ready(function(){let e,o;function t(e){document.getElementById("memberName").innerHTML='<h1 class="d-block text-center mt-4 mb-5">'+e+"'s Account </h1>"}function n(e){document.getElementById("productsDeck").innerHTML=e.map(e=>`<div class="card mb-4 col-sm-12 col-md-3">\n                                                                      <img src="${e.photoUrl}" alt="Avatar" class="viewMoreButton mb-5">\n                                                                      <div class="mx-1 my-1">\n                                                                          <h5 class="text-center mb-2">${e.title}</h5>\n                                                                          <div class="productCard-columnWrap">\n                                                                              <small class="mb-1">${e.format}</small>\n                                                                              <small>${e.condition}</small>\n                                                                          </div>\n                                                                          <div id="toggleSection${e._id}" class="productCard-toggleSection" class="productCard-toggleSection">\n                                                                              <div id="${e._id}" class="productCard-viewMoreLink buttonLink text-center">View more</div>\n                                                                              <p id="productCard-price${e._id}" class="productCard-price mb-2">&dollar;${e.price}</p>\n                                                                          </div>\n                                                                      </div>\n                                                                    </div>`).join(" ");let o=document.getElementsByClassName("productCard-toggleSection");for(let e=0;e<o.length;e++)o[e].addEventListener("mouseover",t.bind(null,o[e].id)),o[e].addEventListener("mouseleave",n.bind(null,o[e].id));function t(e){let o=e.slice(13);$("#productCard-price"+o).css("opacity","0"),$("#toggleSection"+o).css("transform","translateX(33%)"),$("#"+o).css("opacity","1")}function n(e){let o=e.slice(13);$("#productCard-price"+o).css("opacity","1"),$("#"+o).css("opacity","0"),$("#toggleSection"+o).css("transform","translateX(-45%)")}let a=document.getElementsByClassName("productCard-viewMoreLink");for(let e=0;e<a.length;e++)a[e].addEventListener("click",i)}function i(o){let t=o.target.id;$.ajax({url:`${e}/products/${t}`,type:"GET",dataType:"json",success:function(e){!function(e){let o,t,n=JSON.parse(sessionStorage.getItem("currentUser")),i=n.username;o=e.shipping.map(e=>`<li>${e}</li>`).join(" "),t=e.comments.map(function(e){let o=e.replies.map(e=>`\n                                                                                    <div class="flexContainer--row col-sm-12 col-md-12 my-3">\n                                                                                        <div class="col-sm-3 col-md-2 mb-2">\n                                                                                            <div class="viewMorePage__thumbnail viewMorePage__thumbnail--commenter mx-auto" style="background-image:url(${e.replier.memberPhotoUrl})"></div>\n                                                                                        </div>\n                                                                                        <div class="col-12">\n                                                                                        <small class="comment-info flexContainer--row">\n                                                                                            <span class="font-italic mr-1">${e.replier.memberUsername}</span>\n                                                                                            <span class="font-italic">${l(e.postedOn)}</span>\n                                                                                        </small>\n                                                                                        <div>${e.content}</div>\n                                                                                    </div>`).join(" "),t=0===e.replies.length?"":'<div class="col-sm-3 col-md-2 mb-2">\n                                                                      <div class="viewMorePage__thumbnail viewMorePage__thumbnail--commenter mx-auto" style="background-image:url(https://miro.medium.com/max/1200/1*pHb0M9z_UMhO22HlaOl2zw.jpeg)"></div>\n                                                                  </div>\n                                                                  <div class="flexContainer--col col-10 flexContainer--col--right viewMorePage-postComment">\n                                                                      <textarea id="viewMorePage-postReply" class="col-12" rows="2" cols="100"></textarea>\n                                                                      <div id="viewMorePage-postCommentButton" class="button button--small mt-2">\n                                                                          Reply\n                                                                      </div>\n                                                                  </div>',a=0===e.replies.length?"":`<div class="buttonLink buttonLink--noCap buttonLink--small buttonLink--grey" data-toggle="collapse" href="#showCommentReply">${e.replies.length} replies</div>\n                                                                      <div class="collapse" id="showCommentReply">\n                                                                          <div class="card card-body flexContainer--col">\n                                                                              <div>${o}</div> \n                                                                              <div class="flexContainer--row">${t}<div>\n                                                                          </div>\n                                                                      </div>`;return n&&e.commenter.memberUsername===i?`<div class="flexContainer--col col-sm-12 col-lg-12 col-md-10 my-3">\n                                                            <div class="flexContainer--row">\n                                                                <div class="col-sm-3 col-md-2 mb-2">\n                                                                    <div class="viewMorePage__thumbnail viewMorePage__thumbnail--commenter mx-auto" style="background-image:url(${JSON.parse(sessionStorage.getItem("currentUser")).photoUrl})"></div>\n                                                                </div>\n                                                                <div class="col-sm-9 col-md-10">\n                                                                    <small class="comment-info flexContainer--row">\n                                                                        <span class="font-italic mr-1">You</span>\n                                                                        <span class="font-italic">${l(e.postedOn)}</span>\n                                                                    </small>\n                                                                    <div>${e.content}</div>\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-sm-9 col-md-10 ml-auto">\n                                                                <div class="buttonLink buttonLink--noCap buttonLink--small buttonLink--grey float-right" data-toggle="collapse" href="#showCommentReply">Reply</div>\n                                                                <div class="collapse" id="showCommentReply">\n                                                                    <div class="card card-body flexContainer--row">\n                                                                        <div class="col-sm-3 col-md-2 mb-2">\n                                                                            <div class="viewMorePage__thumbnail viewMorePage__thumbnail--commenter mx-auto" style="background-image:url(https://miro.medium.com/max/1200/1*pHb0M9z_UMhO22HlaOl2zw.jpeg)"></div>\n                                                                            </div>\n                                                                            <div class="flexContainer--col col-10 flexContainer--col--right viewMorePage-postComment">\n                                                                                <textarea id="viewMorePage-postReply" class="col-12" rows="2" cols="100"></textarea>\n                                                                                <div id="viewMorePage-postCommentButton" class="button button--small mt-2">Reply</div>\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                            </div>\n                                                            <div class="flexContainer--col col-sm-12 col-md-10 ml-auto">${a}</div>\n                                                        </div>`:e.commenter.memberUsername!==i?`<div class="flexContainer--col col-sm-12 col-lg-12 col-md-10 my-3">\n                                                            <div class="flexContainer--row">\n                                                                <div class="col-sm-3 col-md-2 mb-2">\n                                                                    <div class="viewMorePage__thumbnail viewMorePage__thumbnail--commenter mx-auto" style="background-image:url(${e.commenter.memberPhotoUrl})"></div>\n                                                                </div>\n                                                                <div class="col-sm-9 col-md-10">\n                                                                    <small class="comment-info flexContainer--row">\n                                                                        <span class="font-italic mr-1">${e.commenter.memberUsername}</span>\n                                                                        <span class="font-italic">${l(e.postedOn)}</span>\n                                                                    </small>\n                                                                    <div>${e.content}</div>\n                                                                </div>\n                                                            </div>\n                                                            \n                                                            \n                                                            <div class="flexContainer--col col-sm-12 col-md-10 ml-auto">${a}</div>\n                                                        </div>`:void 0}).join(" "),document.getElementById("viewMorePage").innerHTML=`\n                                                      \x3c!-- General description section --\x3e\n                                                      <div class="flexContainer--row mb-5">\n                                                          <div class="flexContainer--col col-sm-12 col-md-5">\n                                                              <div class="col-sm-12 col-md-6 flexContainer--row mb-5">\n                                                                  <svg class="backIcon mr-2">\n                                                                      <use xlink:href="images/icons.svg#icon-arrow-left2"></use>\n                                                                  </svg>\n                                                                  <p id="backToLanding" class="buttonLink buttonLink--noCap buttonLink--grey mt-3">\n                                                                      Back to Home\n                                                                  </p>\n                                                              </div>\n                                                              <img src="${e.photoUrl}" alt="Book image" class="viewMorePage__mainPhoto">\n                                                          </div>\n                                                          <div class="flexContainer--col col-sm-12 col-md-7">\n                                                              <h2>${e.title}</h2>\n                                                              <h3 class="color-grey mb-5">&dollar;${e.price}</h3>\n                                                              <p class="mb-5">\n                                                                  ${e.description}\n                                                              </p>\n                                                              <div class="flexContainer--row float-right mb-5">\n                                                                  <div class="button button--bordered mr-3">Buy Now</div>\n                                                                  <div class="buttonLink buttonLink--noCap buttonLink--grey buttonLink--small">Add to Watchlist</div>\n                                                              </div>\n                                                              <div class="flexContainer--row mb-2">\n                                                                  <small class="capitalised color-black mr-1">Condition:</small>\n                                                                  <small>${e.condition}</small>\n                                                              </div>\n                                                              <div class="flexContainer--row">\n                                                                  <small class="capitalised color-black mr-1">Listed city:</small>\n                                                                  <small>${e.listedCity}</small>\n                                                              </div>        \n                                                          </div>\n                                                      </div>\n                                                      <br/>\n\n                                                      \x3c!-- Detail section --\x3e\n                                                      <div class="flexContainer--row mt-5">\n\n                                                          \x3c!-- Accordion section --\x3e\n                                                          <div id="accordion" class="col-sm-12 col-md-5">\n                                                            \x3c!-- Accordion - Product details --\x3e\n                                                            <div class="mb-3"> \n                                                              <button class="button button--bordered button--accordion" data-toggle="collapse" data-target="#viewMorePage__productDetails" aria-expanded="true" aria-controls="viewMorePage__productDetails">\n                                                                Details\n                                                              </button>\n                                                              <div id="viewMorePage__productDetails" class="collapse viewMorePage__accordion--content" aria-labelledby="headingOne" data-parent="#accordion">\n                                                                <div class="card-body">\n                                                                  <div class="flexContainer--row">\n                                                                      <small class="capitalised color-black mr-1">Author:</small>\n                                                                      <small>${e.author}</small>\n                                                                  </div>\n                                                                  <div class="flexContainer--row">\n                                                                      <small class="capitalised color-black mr-1">Category:</small>\n                                                                      <small>${e.category}</small>\n                                                                  </div>\n                                                                  <div class="flexContainer--row">\n                                                                      <small class="capitalised color-black mr-1">Format:</small>\n                                                                      <small>${e.format}</small>\n                                                                  </div>    \n                                                                </div>\n                                                              </div>\n                                                            </div>\n                                                            \x3c!-- Accordion - Shipping info --\x3e\n                                                            <div class="mb-3"> \n                                                              <button class="button button--bordered button--accordion" data-toggle="collapse" data-target="#viewMorePage__shippingInfo" aria-expanded="true" aria-controls="viewMorePage__shippingInfo">\n                                                                Shipping Information\n                                                              </button>\n                                                              <div id="viewMorePage__shippingInfo" class="collapse viewMorePage__accordion--content" aria-labelledby="headingOne" data-parent="#accordion">\n                                                                <div class="card-body">\n                                                                  <ul>\n                                                                    ${o}\n                                                                  </ul>    \n                                                                </div>\n                                                              </div>\n                                                            </div>\n                                                            \x3c!-- Accordion - Seller info --\x3e\n                                                            <div class="mb-3"> \n                                                              <button class="button button--bordered button--accordion" data-toggle="collapse" data-target="#viewMorePage__sellerInfo" aria-expanded="true" aria-controls="viewMorePage__sellerInfo">\n                                                                About Seller\n                                                              </button>\n                                                              <div id="viewMorePage__sellerInfo" class="collapse viewMorePage__accordion--content" aria-labelledby="headingOne" data-parent="#accordion">\n                                                                <div class="card-body btBorder btBorder--medium">\n                                                                  <div class="flexContainer--col flexContainer--col--centered">\n                                                                      <div class="viewMorePage__thumbnail viewMorePage__thumbnail--seller mb-2" style="background-image:url(${e.sellerInfo.photoUrl})"></div>\n                                                                      <span class="mb-3">${e.sellerInfo.username}</span>\n                                                                      <div class="flexContainer--row">\n                                                                          <small class="color-black mr-1">Location:</small>\n                                                                          <small>${e.sellerInfo.address.city}</small>\n                                                                      </div>\n                                                                      <div class="flexContainer--row">\n                                                                          <small class="color-black mr-1">Member Since:</small>\n                                                                          <small>17th June 2015</small>\n                                                                      </div>\n                                                                  </div>\n                                                                </div>\n                                                                \n                                                              </div>\n                                                            </div>\n                                                          </div>\n\n                                                          \x3c!-- Q&A section --\x3e\n                                                          <div class="flexContainer--col col-sm-12 col-md-6">\n                                                              <h3 class="mb-3">Chat about this book</h3>\n\n                                                              \x3c!-- Add comment section --\x3e\n                                                              <div id="viewMorePage-addCommentWrapper" class="flexContainer--row mx-auto">\n                                                                  <div class="col-sm-3 col-md-2 mb-2">\n                                                                      <div class="viewMorePage__thumbnail viewMorePage__thumbnail--commenter mx-auto" style="background-image:url(${JSON.parse(sessionStorage.getItem("currentUser")).photoUrl})"></div>\n                                                                  </div>\n                                                                  <div class="flexContainer--col flexContainer--col--right viewMorePage-postComment">\n                                                                      <textarea id="viewMorePage-postComment" class="col-12" rows="3" cols="100"></textarea>\n                                                                      <div id="viewMorePage-postCommentButton" class="button button--small mt-2">\n                                                                          Submit\n                                                                      </div>\n                                                                  </div>\n                                                              </div>\n\n                                                              \x3c!-- Comments section --\x3e\n                                                              <div class="col-12">\n                                                                <div id="viewMorePage-comments" class="mb-5">\n                                                                    ${t}\n                                                                </div>\n                                                            </div>\n                                                          </div>\n                                                      </div>`,$("html, body").animate({scrollTop:0},"fast"),document.getElementById("backToLanding").addEventListener("click",function(){$("#viewMorePage").hide(),$("#landingPage").show(),sessionStorage.removeItem("currentProduct")}),document.getElementById("viewMorePage").contains(document.getElementById("viewMorePage-postCommentButton"))&&document.getElementById("viewMorePage-postCommentButton").addEventListener("click",a)}(e[0]),sessionStorage.setItem("currentProduct",JSON.stringify(e[0])),$("#viewMorePage").show(),$("#projectPage").hide(),$("#landingPage").hide(),console.log(e[0].comments),0!==e[0].comments.length||(document.getElementById("viewMorePage-comments").innerHTML='<div id="noCommentNote"\n                                                                                  class="text-center mt-5">\n                                                                                  There has not been any question about this artwork.</div>')},error:function(e){console.log("Error: "+e)}})}function a(){let o=$("textarea#viewMorePage-postComment").val(),t=JSON.parse(sessionStorage.getItem("currentProduct"))._id,n=JSON.parse(sessionStorage.getItem("currentUser"))._id,i=JSON.parse(sessionStorage.getItem("currentUser")).username,a=JSON.parse(sessionStorage.getItem("currentUser")).photoUrl;$.ajax({url:`${e}/comments/add`,type:"POST",data:{productId:t,content:o,memberId:n,memberUsername:i,memberPhotoUrl:a},success:function(e){console.log(e),$("textarea#viewMorePage-postComment").val(""),function(e){let o=`\n                        <div class="flexContainer--col col-sm-12 col-lg-12 col-md-10 my-3">\n                            <div class="flexContainer--row">\n                                <div class="col-sm-3 col-md-2 mb-2">\n                                    <div class="viewMorePage__thumbnail viewMorePage__thumbnail--commenter mx-auto" style="background-image:url(${JSON.parse(sessionStorage.getItem("currentUser")).photoUrl})"></div>\n                                </div>\n                                <div class="col-sm-9 col-md-10">\n                                    <small class="comment-info flexContainer--row">\n                                        <span class="font-italic mr-1">You</span>\n                                        <span class="font-italic">${l(e.postedOn)}</span>\n                                    </small>\n                                    <div>${e.content}</div>\n                                </div>\n                            </div>\n                        </div>`,t=document.getElementById("viewMorePage-comments"),n=document.getElementById("noCommentNote");t.contains(n)&&n.remove();document.getElementById("viewMorePage-comments").innerHTML+=o}(e)},error:function(e){console.log(e)}})}function l(e){let o=new Date(Date.parse(e)),t=o.getDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()],i=o.getFullYear(),a=o.getHours(),l=(o.getMinutes()<10?"0":"")+o.getMinutes(),r=a<12?"AM":"PM";const s=new Date,d=new Date(s-864e5),c=Math.round((s-o)/1e3),m=Math.round(c/60),g=s.toDateString()===o.toDateString(),u=d.toDateString()===o.toDateString();return c<10?"just now":c<60?`${c} seconds ago`:c<100?"about a minute ago":m<60?`${m} minutes ago`:g?`on today at ${a}:${l} ${r}`:u?`on yesterday at ${a}:${l}`:`on ${n} ${t} ${i} at ${a}:${l}${r}`}function r(e){let o=e.about?e.about:"",t=e.website?e.website:"",n=e.location?e.location:"";document.getElementById("memberAccount").innerHTML=`<div class="flexContainer-flexStart mb-1">\n                <strong class="userInfoField">Username:</strong>\n                <div>${e.username}</div>\n            </div>\n            <div class="flexContainer-flexStart mb-1">\n                <strong class="userInfoField">Email:</strong>\n                <div>${e.email}</div>\n            </div>\n            <div class="flexContainer-flexStart mb-1">\n                <strong class="userInfoField">About:</strong>\n                <div>${o}</div>\n            </div>\n            <div class="flexContainer-flexStart mb-1">\n                <strong class="userInfoField">Location:</strong>\n                <div>${n}</div>\n            </div>\n            <div class="flexContainer-flexStart mb-1">\n                <strong class="userInfoField">Website:</strong>\n                <a>${t}</a>\n            </div>`}function s(o){o.preventDefault();let t=sessionStorage.getItem("memberId"),n=$("#editUserForm__username").val(),i=$("#editUserForm__email").val(),a=$("#editUserForm__description").val(),l=$("#editUserForm__location").val(),s=$("#editUserForm__website").val();$.ajax({url:`${e}/updateMember/${t}`,type:"PATCH",data:{username:n,email:i,about:a,location:l,website:s},success:function(e){r(e),$("#updateMemberBtn").show()},error:function(e){console.log(e)}})}function d(){r({about:"undefined"!==sessionStorage.getItem("about")?sessionStorage.getItem("about"):"",website:"undefined"!==sessionStorage.getItem("website")?sessionStorage.getItem("website"):"",location:"undefined"!==sessionStorage.getItem("location")?sessionStorage.getItem("location"):"",username:sessionStorage.getItem("username"),email:sessionStorage.getItem("email")}),$("#updateMemberBtn").show()}function c(){let o=sessionStorage.getItem("memberId");o&&$.ajax({url:`${e}/myPortfolios/${o}`,type:"GET",success:function(e){var o;"No portfolio by this user found"!==e?(o=e,document.getElementById("myProjectCards").innerHTML=o.map(e=>`<div class="card\n                                                                                    portfolioCard\n                                                                                    border-bottom">\n                                                                            <div style="background-image:url(${e.image})"\n                                                                                class="portfolioPage-image"></div>\n                                                                            <h5 class="portfolioPage-cardTitle\n                                                                                      card-text mb-3">\n                                                                                      ${e.title}</h5>\n                                                                            <div id="portfolioCard__buttonWrapper${e._id}"\n                                                                                class="row mb-2">\n                                                                                <div class="col-sm-12\n                                                                                            col-md-4\n                                                                                            col-lg-4">\n                                                                                    <div id="${e._id}"\n                                                                                        class="button\n                                                                                                viewMoreButton\n                                                                                                \n                                                                                                mb-3">\n                                                                                                View</div>\n                                                                                </div>\n                                                                                <div class="col-sm-12\n                                                                                            col-md-4\n                                                                                            col-lg-4">\n                                                                                    <div id="edit${e._id}"\n                                                                                        class="editButton\n                                                                                                btn-dark\n                                                                                                \n                                                                                                \n                                                                                                py-2\n                                                                                                px-2\n                                                                                                mb-3">\n                                                                                                Edit</div>\n                                                                                </div>\n                                                                                <div class="col-sm-12\n                                                                                            col-md-4\n                                                                                            col-lg-4">\n                                                                                    <div id="delete${e._id}"\n                                                                                        class="deleteButton\n                                                                                                btn-red \n                                                                                                px-3 py-2\n                                                                                                mb-3\n                                                                                                \n                                                                                                float-lg-right">\n                                                                                                Delete</div>\n                                                                                </div>\n                                                                            </div>\n                                                                        </div>`).join(" "),m()):document.getElementById("myProjectCards").innerHTML='<div class="noPortfolio text-center">You have not uploaded a project yet</div>'},error:function(e){console.log(e)}})}function m(){let e=document.getElementsByClassName("viewMoreButton");for(let o=0;o<e.length;o++)e[o].addEventListener("click",i);let o=document.getElementsByClassName("editButton");for(let e=0;e<o.length;e++)o[e].addEventListener("click",g);let t=document.getElementsByClassName("deleteButton");for(let e=0;e<t.length;e++)t[e].addEventListener("click",u)}function g(o){const t=o.target.id.slice(4);sessionStorage.setItem("projectOnEdit",t),$.ajax({url:`${e}/findProject/${t}`,type:"GET",dataType:"json",success:function(e){$("#updatePortfolioTitle").val(e.title),$("#updatePortfolioDescription").val(e.description),$("#updatePortfolioImage").val(e.image),$("#updatePortfolioCategory").val(e.category),$("#updatePortfolioPrice").val(e.price),$("#projectPage").hide(),$("#updateProductPage").show()},error:function(e){console.log(e)}})}function u(e){let o=e.target.id.slice(6);sessionStorage.setItem("projectOnDelete",o);let t=`portfolioCard__buttonWrapper${o}`;document.getElementById(t).innerHTML='<div class="mx-auto">\n                                    <p class="text-center">\n                                        Are you sure you want to delete this project?</p>\n                                    <button id="abortDeleteProject"\n                                            class="btn btn-danger  back-portfolio  float-left">\n                                            Cancel</button>\n                                    <button id="confirmDeleteProject"\n                                            type="button"\n                                            class="btn btn-dark  float-right ">\n                                            Delete</button>\n                              </div>',document.getElementById("confirmDeleteProject").addEventListener("click",v),document.getElementById("abortDeleteProject").addEventListener("click",p)}function v(){let o=sessionStorage.getItem("projectOnDelete");$.ajax({url:`${e}/deletePortfolio/${o}`,type:"DELETE",success:function(e){sessionStorage.removeItem("projectOnDelete"),c()},error:function(e){console.log(e)}})}function p(e){let o=sessionStorage.getItem("projectOnDelete"),t=`portfolioCard__buttonWrapper${o}`;document.getElementById(t).innerHTML=`<div class="col-sm-12 col-md-4 col-lg-4">\n                                    <div id="${o}"\n                                        class="button viewMoreButton  mb-3">\n                                        View\n                                    </div>\n                                </div>\n                                <div class="col-sm-12 col-md-4 col-lg-4">\n                                    <div id="edit${o}"\n                                        class="editButton btn-dark   py-2 px-2 mb-3">\n                                        Edit\n                                    </div>\n                                </div>\n                                <div class="col-sm-12 col-md-4 col-lg-4">\n                                    <div id="delete${o}"\n                                        class="deleteButton btn-red  px-3 py-2 mb-3  float-lg-right">\n                                        Delete\n                                    </div>\n                              </div>`,m()}console.log("hello"),$("html, body").animate({scrollTop:0},"fast"),sessionStorage.clear(),$.ajax({url:"config.json",type:"GET",dataType:"json",success:function(o){e=o.SERVER_URL+":"+o.SERVER_PORT,console.log(e),$.ajax({url:`${e}/products`,type:"GET",dataType:"json",success:function(e){console.log(e),n(e)},error:function(e){console.log("Error: "+e)}})},error:function(){console.log("Cannnot retrieve server url")}}),$(document).ajaxStart(function(){$(".loader").css("display","block"),clearTimeout(o)}),$(document).ajaxComplete(function(){o=setTimeout(function(){$(".loader").css("display","none")},1500)}),sessionStorage.username?($("#logoutBtn").show(),$(".home-btn").show(),$("#myPortfolioBtn").show(),$("#loginBtn").hide(),$("#signUpBtn").hide(),t(sessionStorage.username),$("#landingPage").show(),$("#viewMorePage").hide(),$("#loginPage").hide(),$("#signUpPage").hide(),$("#projectPage").hide(),$("#uploadProductPage").hide(),$("#updateProductPage").hide()):($("#logoutBtn").hide(),$("#myPortfolioBtn").hide(),$(".home-btn").show(),$("#loginBtn").show(),$("#signUpBtn").show(),$("#landingPage").show(),$("#viewMorePage").hide(),$("#loginPage").hide(),$("#signUpPage").hide(),$("#projectPage").hide(),$("#uploadProductPage").hide(),$("#updateProductPage").hide()),$(".home-btn").click(function(){$("#landingPage").show(),$("#viewMorePage").hide(),$("#loginPage").hide(),$("#signUpPage").hide(),$("#projectPage").hide(),$("#uploadProductPage").hide(),$("#updateProductPage").hide()}),$("#loginBtn").click(function(){$("#loginPage").show(),$("#landingPage").hide(),$("#viewMorePage").hide(),$("#signUpPage").hide(),$("#projectPage").hide(),$("#uploadProductPage").hide(),$("#updateProductPage").hide()}),$("#signUpBtn").click(function(){$("#signUpPage").show(),$("#projectPage").hide(),$("#loginPage").hide(),$("#landingPage").hide(),$("#viewMorePage").hide(),$("#uploadProductPage").hide(),$("#updateProductPage").hide()}),$("#myPortfolioBtn").click(function(){c(),function(){let o=sessionStorage.getItem("memberId");if(!o)return;$.ajax({url:`${e}/myAccountInfo/${o}`,type:"GET",dataType:"json",success:function(e){r(e)},error:function(e){console.log(e)}})}(),$("#projectPage").show(),$("#signUpPage").hide(),$("#loginPage").hide(),$("#landingPage").hide(),$("#viewMorePage").hide(),$("#uploadProductPage").hide(),$("#updateProductPage").hide()}),$("#addPortfolio").click(function(){$("html, body").animate({scrollTop:0},"fast"),$("#uploadProductPage").show(),$("#projectPage").hide(),$("#signUpPage").hide(),$("#loginPage").hide(),$("#landingPage").hide(),$("#viewMorePage").hide(),$("#updateProductPage").hide()}),$(".back-portfolio").click(function(){$("#projectPage").show(),$("#uploadProductPage").hide(),$("#signUpPage").hide(),$("#loginPage").hide(),$("#landingPage").hide(),$("#viewMorePage").hide(),$("#updateProductPage").hide()}),$("#updateProject").click(function(){$("#uploadProductPage").hide(),$("#projectPage").hide(),$("#signUpPage").hide(),$("#loginPage").hide(),$("#landingPage").hide(),$("#viewMorePage").hide(),$("#updateProductPage").show()}),$("#deleteProject").click(function(){$("#uploadProductPage").hide(),$("#projectPage").hide(),$("#signUpPage").hide(),$("#loginPage").hide(),$("#landingPage").hide(),$("#viewMorePage").hide(),$("#updateProductPage").hide()}),$(".edit-button").click(function(){$("html, body").animate({scrollTop:0},"fast")}),$("#logoutBtn").click(function(){sessionStorage.clear(),$("#landingPage").show(),$("#loginPage").hide(),$("#signUpPage").hide(),$("#projectPage").hide(),$("#uploadProductPage").hide(),$("#updatePortfolio").hide(),location.reload("#loginForm")}),$("#registerForm").submit(function(){event.preventDefault();let o=$("#registerUsername").val(),t=$("#registerEmail").val(),n=$("#registerPassword").val();$.ajax({url:`${e}/registerMember`,type:"POST",data:{username:o,email:t,password:n},success:function(e){"Members name is already taken. Please choose another name"!==e?(Swal.fire({title:"Account Created!",text:"Your account has been created, please login to activate your account",icon:"success",confirmButtonText:"OK"}),$("#loginBtn").show(),$("#registerBtn").hide(),$("#loginPage").show(),$("#signUpPage").hide()):(Swal.fire({title:"Error!",text:"Username already taken. Please try another one",icon:"error",confirmButtonText:"OK"}),$("#registerUsername").val(""),$("#registerEmail").val(""),$("#registerPassword").val(""))},error:function(e){console.log(e)}})}),$("#loginForm").submit(function(){event.preventDefault();let o=$("#inputUsernameLogin").val(),n=$("#inputPasswordLogin").val();$.ajax({url:`${e}/members/login`,type:"POST",data:{username:o,password:n},success:function(e){" "===e?Swal.fire({title:"Empty Input Field",text:"Please fill in all input fields",icon:"warning",confirmButtonText:"OK"}):"Member not found. Please register"===e?Swal.fire({title:"Not Registered",text:"Member not found. Please register",icon:"warning",confirmButtonText:"OK"}):"Not Authorized"===e?Swal.fire({title:"Opps",text:"Incorrect username or password",icon:"error",confirmButtonText:"OK"}):(sessionStorage.setItem("currentUser",JSON.stringify(e)),t(o),$("#logoutBtn").show(),$("#myPortfolioBtn").show(),$("#authBtnGroup-question").hide(),$("#loginBtn").hide(),$("#signUpBtn").hide(),$("#landingPage").show(),$("#loginPage").hide(),$("html, body").animate({scrollTop:0},"fast"),console.log(sessionStorage))},error:function(){console.log("error: cannot call api")}})}),$("#addProductForm").submit(function(){if(event.preventDefault(),!sessionStorage.memberId)return void alert("401, permission denied");let o=$("#addPortfolioTitle").val(),t=$("#addPortfolioDescription").val(),n=$("#addPortfolioImage").val(),i=$("#addPortfolioCategory").val(),a=$("#addPortfolioPrice").val(),l=sessionStorage.getItem("memberId");""==o||""==t||""==n||""==i||""==a?Swal.fire({title:"Empty Input Field",text:"Please fill in all input fields",icon:"warning",confirmButtonText:"OK"}):$.ajax({url:`${e}/addPortfolio`,type:"POST",data:{title:o,description:t,image:n,category:i,price:a,memberId:l},success:function(e){"Artwork already added"!==e?(Swal.fire({title:"Artwork Uploaded",text:"You project has been added to your portfolio",icon:"success",confirmButtonText:"OK"}),$("#addPortfolioTitle").val(),$("#addPortfolioDescription").val(),$("#addPortfolioImage").val(),$("#addPortfolioCategory").val(),$("#addPortfolioPrice").val(),$("#addPortfolioMemberId").val(),$("#addProductForm").trigger("reset"),$("#uploadProductPage").hide(),c(),$("#projectPage").show(),$("html, body").animate({scrollTop:50},"fast")):Swal.fire({title:"Title Taken",text:"Title has been taken already, please try another one",icon:"warning",confirmButtonText:"OK"})},error:function(){}})}),document.getElementById("filterButton").addEventListener("click",function(){let o=JSON.parse($("#filterDropdown-byPrice").val()).min,t=JSON.parse($("#filterDropdown-byPrice").val()).max,i=$("#filterDropdown-byCategory").val();$.ajax({url:`${e}/filterPortfolios/${o}/${t}/${i}`,type:"GET",success:function(e){"Sorry, there is no artwork that matches your search!"===e?document.getElementById("artsDeck").innerHTML='\n                                                                <div class="row mx-auto">\n                                                                    <h5 class="text-center mt-5 mb-5">\n                                                                        Sorry, there is no artwork that matches your search!\n                                                                    </h5>\n                                                                </div>':n(e)},error:function(e){console.log("Error: "+e)}})}),document.getElementById("updateMemberBtn").addEventListener("click",function(){$("#updateMemberBtn").hide(),document.getElementById("memberAccount").innerHTML='<form id="editUserForm">\n                                                            <div class="form-group row">\n                                                                <label for="editUserForm__username" class="col-md-3">\n                                                                    Username:\n                                                                </label>\n                                                                <input type="text" class="form-control col-md-9" id="editUserForm__username">\n                                                            </div>\n                                                            <div class="form-group row">\n                                                                <label for="editUserForm__email" class="col-md-3">\n                                                                    Email:\n                                                                </label>\n                                                                <input type="email" class="form-control col-md-9" id="editUserForm__email">\n                                                            </div>\n                                                            <div class="form-group row">\n                                                                <label for="editUserForm__description" class="col-md-3">\n                                                                    Description:\n                                                                </label>\n                                                                <textarea type="text" class="form-control col-md-9" id="editUserForm__description" rows="4"></textarea>\n                                                            </div>\n                                                            <div class="form-group row">\n                                                                <label for="editUserForm__location" class="col-md-3">\n                                                                    Location:\n                                                                </label>\n                                                                <input type="text" class="form-control col-md-9" id="editUserForm__location">\n                                                            </div>\n                                                            <div class="form-group row">\n                                                                <label for="editUserForm__website" class="col-md-3">\n                                                                    Website:\n                                                                </label>\n                                                                <input id="editUserForm__website" type="text" class="form-control col-md-9">\n                                                            </div>\n                                                            <button id="cancelEditUserForm" class="btn btn-danger   float-left mb-5">\n                                                                Cancel\n                                                            </button>\n                                                            <button id="saveUserInfo" type="submit" class="float-right mb-5 btn btn-dark  ">\n                                                                Save\n                                                            </button>\n                                                        </form>',document.getElementById("editUserForm").addEventListener("submit",s),document.getElementById("cancelEditUserForm").addEventListener("click",d),function(){let o=sessionStorage.getItem("memberId");$.ajax({url:`${e}/myAccountInfo/${o}`,type:"GET",dataType:"json",success:function(e){$("#editUserForm__username").val(e.username),$("#editUserForm__email").val(e.email),$("#editUserForm__description").val(e.about),$("#editUserForm__website").val(e.website),$("#editUserForm__location").val(e.location)},error:function(e){console.log(e)}})}()}),$("#updatePortfolioForm").submit(function(){event.preventDefault();let o=sessionStorage.getItem("projectOnEdit"),t=$("#updatePortfolioTitle").val(),n=$("#updatePortfolioDescription").val(),i=$("#updatePortfolioImage").val(),a=$("#updatePortfolioCategory").val(),l=$("#updatePortfolioPrice").val();$.ajax({url:`${e}/updatePortfolio/${o}`,type:"PATCH",data:{title:t,description:n,image:i,category:a,price:l},success:function(e){sessionStorage.removeItem("projectOnEdit"),$("#updatePortfolioForm").trigger("reset"),$("#updateProductPage").hide(),c(),$("#projectPage").show(),$("html, body").animate({scrollTop:0},"fast")},error:function(){console.log("error: cannot call api")}})})});